const e={};async function n(e){const n=function(e){const n=new URL("https://en.wikipedia.org/w/api.php?origin=*");for(const[t,r]of Object.entries(e))n.searchParams.append(t,r);return n}(e);let t,r;try{t=await fetch(n)}catch(e){return console.error(`Error while fetching data from ${n.href}: ${e.message}`),null}if(!t.ok)return console.error(`HTTP-Error while fetching data from ${n.href}: ${t.status}`),null;try{r=await t.json()}catch(e){return console.error(`Error while parsing response from ${n.href}: ${e.message}`),null}return r}e.searchWikiPagesByTitle=async function(e,t=10){if(!(e&&t>0))return null;return n({action:"opensearch",search:e,limit:t,format:"json"})};var t=e;const r="searches",s=document.getElementById("search"),o=document.getElementById("suggestions"),c=document.getElementById("last-searches"),a=document.getElementById("content");let i;function l(e,n=!1){const t=[];for(const[r,s,o]of e){const e=document.createElement("li");e.className="suggestion";const r=document.createElement("a");r.className="suggestion__link",r.className+=n?" suggestion__link_local":" suggestion__link_remote",r.href=o,r.append(s),r.onclick=u,e.append(r),t.push(e)}return t}function u(e){e.preventDefault(),a.src=this.href,function(e,n,t){const s=h()||[];s.push([e,n,t]);try{localStorage.setItem(r,JSON.stringify(s))}catch(e){return void console.error(`Error while saving searches to storage: ${e.message}`)}f(s)}(s.value,this.innerHTML,this.href)}function h(){const e=localStorage.getItem(r);try{return JSON.parse(e)}catch(e){console.error(`Error while parsing searches from storage: ${e.message}`)}return null}function f(e=null){if(!(e=e||h()))return;const n=e.slice(-3);n.reverse(),c.innerHTML="",c.append(...l(n))}function g(){o.innerHTML=""}f(),s.oninput=()=>{clearTimeout(i),s.value?i=setTimeout((e=>{const n=function(e,n=5){const t=h();if(!t)return null;const r=t.filter((([n,t,r])=>n===e));return r?r.slice(-n):null}(e,5)||[],r=10-n.length;t.searchWikiPagesByTitle(e,r).then((e=>{const t=function(e){if(!e)return[];const n=e[0],t=e[1],r=e[3];return t.reduce(((e,t,s)=>(e.push([n,t,r[s]]),e)),[])}(e);g(),o.append(...l(n,!0)),o.append(...l(t))})).catch((e=>console.log(e.message)))}),300,s.value):g()},window.onstorage=()=>f();
//# sourceMappingURL=index.a20b110a.js.map
